const u=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),h=Array.from(document.querySelectorAll("[data-clickable]"));var f=Array(),s=Array();const S=(e,t)=>{e.forEach(o=>{o.isIntersecting&&(f.push(o.target),t.unobserve(o.target))})},I=new IntersectionObserver(S,{root:null,threshold:.5});v(h);function v(e){e.forEach(t=>{I.observe(t)}),e.forEach(t=>{t.addEventListener("click",w)})}function w(e){if(e.button!==0||e.ctrlKey||e.metaKey)return;e.preventDefault();let t=null;e.target.tagName==="A"?t=e.target:e.target.parentNode.tagName==="A"&&(t=e.target.parentNode),t!=null&&(k(),A(t),window.location.href=t.href)}function k(){let e=f.filter(function(o){return!s.includes(o)}),t=e.map(o=>o.dataset.clickable);t=Array.from(new Set(t)),t.length!=0&&(fetch("/api/analytics/clicks/impressions",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}),s.push(...e))}function A(e){fetch("/api/analytics/clicks",{method:"POST",body:JSON.stringify({clickable:e.dataset.clickable}),headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}})}setInterval(k,2e3);function T(){var e=Array.from(document.querySelectorAll("[data-clickable]")),t=e.filter(function(o){return!h.includes(o)});v(t)}document.addEventListener("livewire:init",()=>{Livewire.on("component-load-more-clicked",e=>{setTimeout(T,2e3)})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".navbar-burger"),t=document.querySelectorAll(".navbar-menu");if(e.length&&t.length)for(var o=0;o<e.length;o++)e[o].addEventListener("click",function(){for(var c=0;c<t.length;c++)t[c].classList.toggle("hidden")});const n=document.querySelectorAll(".navbar-close"),l=document.querySelectorAll(".navbar-backdrop");if(n.length)for(var o=0;o<n.length;o++)n[o].addEventListener("click",function(){for(var r=0;r<t.length;r++)t[r].classList.toggle("hidden")});if(l.length)for(var o=0;o<l.length;o++)l[o].addEventListener("click",function(){for(var r=0;r<t.length;r++)t[r].classList.toggle("hidden")})});var d=document.getElementById("to-top-button"),m=window.pageYOffset;window.onscroll=function(){var e=window.pageYOffset;if(e>300){var t=window.location.href,o=/\/u\//;if(o.test(t))return;m>e?document.getElementById("main_navbar").style.top="0":document.getElementById("main_navbar").style.top="-70px"}m=e,d&&(document.body.scrollTop>500||document.documentElement.scrollTop>500?d.classList.remove("hidden"):d.classList.add("hidden"),window.goToTop=function(){window.scrollTo({top:0,behavior:"smooth"})})};var b=document.getElementById("theme-toggle-dark-icon"),p=document.getElementById("theme-toggle-light-icon"),i=document.getElementById("theme-toggle-dark-icon-2"),y=document.getElementById("theme-toggle-light-icon-2"),B=document.getElementById("theme-toggle"),g=document.getElementById("theme-toggle-2");localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(p.classList.remove("hidden"),i&&y.classList.remove("hidden")):(b.classList.remove("hidden"),i&&i.classList.remove("hidden"));g&&g.addEventListener("click",function(){i.classList.toggle("hidden"),y.classList.toggle("hidden"),E()});B.addEventListener("click",function(){b.classList.toggle("hidden"),p.classList.toggle("hidden"),E()});function E(){localStorage.getItem("color-theme")?localStorage.getItem("color-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"),a="dark"):(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light"),a="light"):document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark")),L(a)}let a="light";localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),a="dark"):document.documentElement.classList.remove("dark");L(a);function L(e){document.querySelectorAll(".thumb-img");var t=document.querySelectorAll(".thumb-iframe");e=="dark"?t.forEach(function(o){if(o.dataset.hasDark!=0){console.log(o.dataset.hasDark);var n=o.src,l=n.includes("?")?"&":"?",c=n+l+"dark_mode=1";o.src=c}}):e=="light"&&t.forEach(function(o){var n=o.src,l=n.replace(/[\?&]dark_mode=1/,"");o.src=l})}
