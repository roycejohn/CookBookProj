import{c as $,j as e,r as s,b as r}from"./jsx-runtime.412fe8b7.js";import{H as k,s as A,M as V,S as T,d as g}from"./MoonSvg.bfc22bba.js";import{a as W}from"./index.09da608e.js";import"./_commonjsHelpers.712cc82f.js";const z=l=>{let n="flex gap-2 justify-between px-2 py-1 rounded-md shadow w-full max-w-xl";switch(l){case"success":n+=" text-green-900 bg-green-200";break;case"error":n+=" text-red-900 bg-red-200";break;case"warning":n+=" text-yellow-900 bg-yellow-200";break;case"info":n+=" text-primary-900 bg-primary-200";break;default:n+=" text-gray-900 bg-gray-200";break}return n};function E(){const[l,n]=s.exports.useState("preview"),[i,h]=s.exports.useState("html"),[m,F]=s.exports.useState(!0),[C,x]=s.exports.useState(null),[c,N]=s.exports.useState(!1),[L,f]=s.exports.useState(!1),[a,d]=s.exports.useState("full"),[M,w]=s.exports.useState("100%"),[y,B]=s.exports.useState(Array()),[u,p]=s.exports.useState({type:"info",message:""}),[t,v]=s.exports.useState({title:null,description:null,body_data:null,css_data:null,config_data:null,forked_from:null,should_center:0,is_responsive:1,is_supports_dark_mode:0});function _(){navigator.clipboard.writeText(t.body_data).then(()=>{f(!0),setTimeout(()=>{f(!1)},1e3),W({method:"post",url:"/api/analytics/copy",data:{component_id:t.id}})}).catch(o=>{console.error("Failed to copy URL:",o)})}function j(){let o;t.should_center<2&&(o=t.should_center+1),t.should_center==2&&(o=0),p({type:"info",message:o===1?"Using Flex Box to center component":o===2?"Using Grid to center component":"Removed centering"}),v({...t,should_center:o})}s.exports.useEffect(function(){x(new k().setComponentData(t).setDarkMode(c).build())},[t,c]),s.exports.useEffect(function(){let o=document.getElementById("component-preview").dataset.props;try{o=JSON.parse(o)}catch{return}x(new k().setComponentData(o.component).setDarkMode(c).build()),v({...t,...o.component}),(o.user!==null||o.user.length>1)&&B(o.user)},[]),s.exports.useEffect(()=>{if(a=="full"){w("100%");return}w(A[a])},[a]);const S={};return s.exports.useEffect(()=>{if(u.message.length!==0){const o=setTimeout(()=>{p({type:"info",message:""})},5e3);return()=>{clearTimeout(o)}}},[u]),r("div",{className:"py-4",children:[r("div",{dusk:"previewOptionsBar",className:"flex justify-end w-full gap-2 py-2",children:[t.user_id==y.id||y.id==1?r("a",{dusk:"updateComponentButton",title:"update component",className:"flex items-center gap-1 px-2 py-1 text-sm border rounded-md dark:border-gray-500 dark:text-gray-300",href:`/playground/update/${t==null?void 0:t.slug}`,children:[e("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),e("span",{className:"hidden md:block",children:"Update"})]}):"",r("a",{dusk:"forkComponentButton",title:"Create a copy and start working on it.",className:"flex items-center gap-1 px-2 py-1 text-sm border rounded-md dark:border-gray-500 dark:text-gray-300",href:`/playground/fork/${t==null?void 0:t.slug}`,children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:e("path",{xmlns:"http://www.w3.org/2000/svg",d:"M7,12 L14.5,12 C16.277025,12 17.7447372,10.6756742 17.970024,8.96013518 C16.2885152,8.7047201 15,7.25283448 15,5.5 C15,3.56700338 16.5670034,2 18.5,2 C20.4329966,2 22,3.56700338 22,5.5 C22,7.27155475 20.6838151,8.73569805 18.9759671,8.96790818 C18.7419236,11.2333126 16.8272778,13 14.5,13 L7,13 L7,15.0354444 C8.69614707,15.2780593 10,16.736764 10,18.5 C10,20.4329966 8.43299662,22 6.5,22 C4.56700338,22 3,20.4329966 3,18.5 C3,16.736764 4.30385293,15.2780593 6,15.0354444 L6,8.96455557 C4.30385293,8.72194074 3,7.26323595 3,5.5 C3,3.56700338 4.56700338,2 6.5,2 C8.43299662,2 10,3.56700338 10,5.5 C10,7.26323595 8.69614707,8.72194074 7,8.96455557 L7,12 Z M4,18.5 C4,19.8807119 5.11928813,21 6.5,21 C7.88071187,21 9,19.8807119 9,18.5 C9,17.1192881 7.88071187,16 6.5,16 C5.11928813,16 4,17.1192881 4,18.5 Z M4,5.5 C4,6.88071187 5.11928813,8 6.5,8 C7.88071187,8 9,6.88071187 9,5.5 C9,4.11928813 7.88071187,3 6.5,3 C5.11928813,3 4,4.11928813 4,5.5 Z M18.5,3 C17.1192881,3 16,4.11928813 16,5.5 C16,6.88071187 17.1192881,8 18.5,8 C19.8807119,8 21,6.88071187 21,5.5 C21,4.11928813 19.8807119,3 18.5,3 Z"})}),e("span",{className:"hidden md:block",children:"Fork"})]}),r("button",{title:"copy html",dusk:"copyComponentButton",onClick:()=>_(),className:"flex items-center gap-1 px-2 py-1 text-sm border rounded-md hover:text-primary-600 dark:border-gray-500 dark:text-gray-300",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e("span",{className:"hidden md:block min-w-20",children:L?"Copied":"Copy code"})]}),r("a",{dusk:"fullscreenComponentButton",title:"View component in new tab",className:"flex items-center gap-1 px-2 py-1 text-sm border rounded-md dark:border-gray-500 dark:text-gray-300",href:`/@${t==null?void 0:t.user_name}/${t==null?void 0:t.slug}/fullscreen-preview`,children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})}),e("span",{className:"hidden md:block",children:"Fullscreen"})]})]}),r("div",{dusk:"previewSection",children:[r("div",{className:"flex rounded-t-lg bg-primary-500",children:[e("button",{dusk:"previewTabButton",onClick:()=>n("preview"),className:`${l=="preview"?"bg-primary-700 rounded-t-lg text-white":"bg-transparent text-gray-300 "} px-4 py-2 md:px-8 md:py-4`,children:"Preview"}),e("button",{dusk:"codeTabButton",onClick:()=>n("code"),className:`${l=="code"?"bg-primary-700 rounded-t-lg text-white":"bg-transparent text-gray-300 "} px-4 py-2 md:px-8 md:py-4`,children:"Code"})]}),r("div",{className:"relative z-40 border-4 rounded-b-lg shadow-lg border-primary-700 dark:bg-gray-700",style:{height:600},children:[l==="preview"&&r("div",{className:"h-full",style:{height:600},children:[r("div",{className:"flex h-[10%] justify-between items-center bg-primary-700 px-2 pt-1",children:[e("div",{children:r("div",{className:"flex items-center gap-2",children:[r("button",{title:"Align this component to the center",onClick:j,className:"text-gray-200 rounded-md px-2 py-0.5 border border-gray-300/30",children:["center [",t.should_center,"]"]}),t.is_supports_dark_mode==1&&e("button",{title:"View preview in dark mode",onClick:()=>N(!c),className:"rounded-md px-2 py-0.5 text-gray-200",children:c?e(V,{}):e(T,{})})]})}),r("div",{className:"hidden md:flex",children:[r("button",{onClick:()=>d("xs"),className:`${a=="xs"?"text-gray-100 underline":"text-gray-300"} flex flex-col items-center justify-end px-3 py-1 text-md font-mono hover:text-slate-50`,children:[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"16px",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e("span",{children:"xs"})]}),r("button",{onClick:()=>d("sm"),className:`${a=="sm"?"text-gray-100 underline":"text-gray-300"} flex flex-col items-center justify-end px-3 py-1 text-md font-mono hover:text-slate-50`,children:[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"20px",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"sm"]}),r("button",{onClick:()=>d("md"),className:`${a=="md"?"text-gray-100 underline":"text-gray-300"} flex flex-col items-center justify-end px-3 py-1 text-md font-mono hover:text-slate-50`,children:[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"24px",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 18h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"md"]}),r("button",{onClick:()=>d("lg"),className:`${a=="lg"?"text-gray-100 underline":"text-gray-300"} hidden lg:flex flex-col items-center justify-end px-3 py-1 text-md font-mono hover:text-slate-50`,children:[e("svg",{className:"text-2xl",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",children:e("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v9H4V7ZM2 19h20"})}),"lg"]}),r("button",{onClick:()=>d("xl"),className:`${a=="xl"?"text-gray-100 underline":"text-gray-300"} hidden xl:flex flex-col items-center justify-end px-3 py-1 text-md font-mono hover:text-slate-50`,children:[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"24px",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"xl"]}),r("button",{onClick:()=>d("full"),className:`${a=="full"?"text-gray-100 underline":"text-gray-300"} flex flex-col items-center justify-end px-3 py-1 text-md font-mono hover:text-slate-50`,children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"24px",stroke:"currentColor",fill:"currentColor",viewBox:"0 0 100 100","aria-hidden":"true",role:"img",children:e("path",{d:"M8.5 22.5A3.5 3.5 0 0 0 5 26v48a3.5 3.5 0 0 0 3.5 3.5h83A3.5 3.5 0 0 0 95 74V26a3.5 3.5 0 0 0-3.5-3.5h-83zm3.5 7h76v41H12v-41z"})}),"full"]})]})]}),r("div",{className:"relative w-full h-full bg-gray-200",style:{...S,height:"88.7%"},children:[u.message.length!=0?e("div",{className:"absolute w-full max-w-xl right-1 top-1",children:r("div",{className:`${z(u.type)} absolute flex w-full justify-end items-center`,children:[e("p",{className:"",children:u.message}),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 cursor-pointer",onClick:()=>p({type:"info",message:""}),children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}):"",e("iframe",{srcDoc:C,className:"w-full h-full m-auto bg-white",style:{width:M}})]})]}),l==="code"&&r("div",{className:"h-full",style:{height:600},children:[r("div",{className:"flex h-[6%]  items-center bg-primary-400",children:[e("button",{dusk:"codeTabHtmlButton",onClick:()=>h("html"),className:`text-sm text-gray-300 ${i=="html"?"bg-[#1e1e1e] shadow text-white":"bg-transparent"} px-4 py-2`,children:"Html"}),e("button",{dusk:"codeTabCssButton",onClick:()=>h("css"),className:`text-sm text-gray-300 ${i=="css"?"bg-[#1e1e1e] shadow text-white":"bg-transparent"} px-4 py-2`,children:"Css"}),e("button",{dusk:"codeTabConfigButton",onClick:()=>h("config"),className:`text-sm text-gray-300 ${i=="config"?"bg-[#1e1e1e] shadow text-white":"bg-transparent"} px-4 py-2`,children:"Config"})]}),i==="html"&&e(g,{height:"92.7%",className:"overflow-y-auto rounded-b",defaultLanguage:"html",defaultValue:t.body_data,automaticLayout:"true",options:{readOnly:!0,automaticLayout:!0},theme:m?"vs-dark":"vs-light"}),i==="css"&&e(g,{height:"92.7%",className:"overflow-y-auto rounded-b",defaultLanguage:"css",defaultValue:t.css_data,automaticLayout:"true",options:{readOnly:!0,automaticLayout:!0},theme:m?"vs-dark":"vs-light"}),i==="config"&&e(g,{height:"92.7%",className:"overflow-y-auto rounded-b",defaultLanguage:"javascript",defaultValue:t.config_data,automaticLayout:"true",options:{readOnly:!0,automaticLayout:!0},theme:m?"vs-dark":"vs-light"})]})]})]})]})}const b=document.getElementById("component-preview");b&&$(b).render(e(E,{}));
